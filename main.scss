$btn-classes: #{"button, .btn, .group-operations .group-op-item, .button-container .rich-icon-btn, .button-container .btn, .seafile-ed-image .image-full-button"};

:root {
	--primary: #ee435b;
	--primary-mix-gray: #91424d;
	--primary-hover: #ed8c9a;
	--bg: #222;
	--bg-active: #444;
	--text-color: #eee;
	--text-color-secondary: #aaa;
	--border-color: #555;
	--border-radius: 6px;
}

body {
	background-color: var(--bg);
	color: var(--text-color);
}

button, .btn {
	&:not(.web-setting-icon-btn):not(.btn-icon):not(.action-icon):not(.fas) {
		font-family: revert-layer;
	}
}
input, optgroup {
	font-family: revert-layer;
}

#{$btn-classes}, input, .input, .form-control, .detail-btn button {
	background-color: black;
	color: white;
	font-size: 0.9rem;
	padding: 0.4rem 0.8rem !important;
	line-height: initial;
	border-radius: var(--border-radius);
	border: 1px solid black;

	&:focus {
		background-color: black;
		color: white;
		border-color: var(--primary);
	}
}

input, .input, .form-control {
	line-height: initial;
	padding: 0.2rem 0.4rem 0;

	&:read-only, &:disabled {
		background-color: var(--bg);
		border: 1px solid var(--border-color);
	}
}

#{$btn-classes}, .btn-secondary {
	&:hover {
		background-color: #222;
		color: white;
		cursor: pointer;
	}
}
.form-control.search-input {
	padding-left: 2.2rem !important;
}

.btn-primary, .btn-outline-primary, input[type="submit"], input.submit,
.detail-btn button, .btn-active[data-active="true"], .rich-icon-btn[data-active="true"] {
	background-color: var(--primary);
	border-color: var(--primary);
	color: white;
	background-image: none;

	&:hover {
		background-color: var(--primary-hover);
		border-color: var(--primary-hover);
		background-image: none;
	}
}

#{$btn-classes}, .btn.btn-primary, .btn.btn-secondary {
	&:disabled {
		background-color: var(--text-color-secondary)
	}
}

.rich-icon-btn {
	width: unset;
	line-height: unset;
}

.sf-view-mode-btn.current-mode {
	background-color: var(--primary-mix-gray) !important;
}

a, a:focus, a:hover {
	color: var(--primary);
}
.path-link {
	color: var(--primary) !important;
}

.input-tip {
	color: var(--text-color-secondary);
}

.sf-heading {
	color: var(--text-color);
	font-variant: all-small-caps;
	font-weight: bold;
}

table {
	td {
		border-bottom-color: var(--border-color);
		color: var(--text-color-secondary);
	}
	th {
		border-bottom-color: var(--border-color);
	}
}

.tr-active, .tr-highlight {
	background-color: #444 !important;
}

.side-panel, .side-panel > *, .main-panel > .reach-router > * {
	border-color: var(--border-color);
}

.login-panel {
	background-color: transparent;
	position: relative;
	overflow: hidden;
	z-index: 0;
	box-shadow: none;
	border: 1px solid var(--border-color);
	border-radius: 0;

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: url('/media/custom/login-bg.jpg') no-repeat fixed 50% 0 / cover;
		filter: blur(20px) brightness(70%);
		z-index: -1;
		margin: -50px 0 0 -50px;
		padding: 50px;
		box-sizing: content-box;
	}
	.input {
		border-color: var(--border-color);
		border-width: 0;
		border-radius: var(--border-radius) var(--border-radius) 0 0;
	}
	br ~ .input {
		border-top-width: 1px;
		border-radius: 0 0 var(--border-radius) var(--border-radius);
	}
}

#header, .main-panel-north, .side-panel-north, .file-view-header, .heading, .top-header,
.sf-md-viewer-topbar > * {
	background-color: black;
	border-color: var(--border-color);
}
.heading {
	background-color: black !important;
	color: white !important;
}
.seafile-rich-editor-topbar, .seafile-rich-editor-topbar > *, .seafile-editor-main-panel {
	background-color: var(--bg);
	border-color: var(--border-color);
}
.header-list-container, .seafile-rich-editor-topbar .btn-group {
	border-color: var(--border-color);
}

.file-view-content {
	background-color: var(--bg);
}

.side-nav-footer {
	background-color: var(--bg);
}
.side-nav-footer .item {
	color: var(--text-color-secondary) !important;
}

.side-panel > div, .side-panel > div > div {
	border-color: var(--border-color);
}

.dir-content-nav {
	background-color: var(--bg);
}

.tree-node-inner-hover {
	background-color: var(--primary);
}

.nav, .seafile-editor-module .side-panel .nav {
	&, &.nav-pills {
		.nav-item .nav-link {
			color: var(--text-color);
		}
	}

	.nav-item .nav-link {
		&:hover, &.active {
			color: var(--primary);
			border-color: var(--primary);
		}
	}

	&.nav-pills {
		.nav-item .nav-link {
			&:hover {
				background-color: var(--primary-mix-gray);
				color: white;
			}
			&.active {
				background-color: var(--primary);
				color: white;
			}
		}
	}
}

.new-narrow-panel {
	box-shadow: none;
	border-color: var(--border-color);

	.hd {
		background-color: var(--primary);
		border-bottom: none;
	}
}

.cur-view-path {
	background-color: var(--bg);
	border-color: var(--border-color);

	&::after {
		border-color: var(--border-color);
	}
}

.web-setting-label {
	text-transform: capitalize;
}

.op-icon {
	color: var(--primary);

	&:hover, &:focus {
		color: var(--primary);
		border-color: var(--primary);
	}
}

.path-toolbar .toolbar-item a:hover {
	color: var(--primary);
}

.action-icon {
	color: inherit !important;

	&:hover {
		color: inherit !important;
	}
}

.dirents-more-menu:hover {
	border: none;
}

.dropdown-menu {
	background-color: black;
	border-radius: var(--border-radius);

	.dropdown-item {
		color: var(--text-color);

		&:hover, &:focus {
			background-color: var(--primary);
		}
	}

	.dropdown-divider {
		border-color: var(--border-color);
	}
}

.sf-popover {
	background: none;
	background-color: black;
	box-shadow: none;
	border: none;
}

.account-popup {
	.item {
		border-color: var(--border-color);
	}

	a.item {
		color: var(--text-color);
		border: none;

		&:hover {
			background-color: var(--primary);
		}
	}
}

#quota-bar {
	border-color: var(--border-color);
}
#quota-usage {
	background-color: var(--primary);
}

.outer-caret, .inner-caret {
	border-color: black transparent;
}
.inner-caret {
	border-top-color: black;
}
.outer-caret {
	border-bottom-color: black;
}
.up-outer-caret .inner-caret {
	border-bottom-color: black;
}

#notifications .title {
	color: var(--text-color);
}

.modal-content {
	background-color: var(--bg);
}
.modal-header, .modal-footer {
	border-color: var(--border-color)
}

.close {
	color: white;
	text-shadow: none;
}

.empty-tip {
	background-color: black;
	border: none;
	border-radius: var(--border-radius);

	h2 {
		color: white;
	}
}

.file-view-tip {
	box-shadow: none;
	background-color: var(--bg);
	border-color: var(--border-color);
	border-radius: var(--border-radius);
}

div[data-evergreen-toaster-container] span > * > * > * {
	background-color: black !important;
	color: white !important;
	box-shadow: none;
}

.seafile-editor-module .seafile-editor-side-panel {
	border-color: var(--border-color);

	.side-panel {
		background-color: var(--bg);

		.side-panel-content {
			padding: 0;
		}
	}
	.nav, .seafile-comment-toggle-resolved, .seafile-comment-footer {
		background-color: black;
		border-color: var(--border-color) !important;
	}
	.seafile-comment {
		border-left: none;
		margin: 0;

		.seafile-comment-toggle-resolved {
			margin-top: 0;
			position: unset;
		}
		.seafile-comment-list {
			background-color: var(--bg);
			margin-top: 0;
			margin-bottom: 0 !important;
			overflow: scroll;

			.seafile-comment-item-resolved {
				background-color: #343;
			}
			.seafile-comment-dropdown {
				.seafile-comment-dropdown-btn {
					&:hover {
						background-color: transparent !important;
						color: white !important;
					}
				}
				button:not(.seafile-comment-dropdown-btn) {
					background-color: black !important;
					color: var(--text-color);

					&:hover {
						color: var(--primary);
					}
				}
			}
		}
		.seafile-comment-footer {
			position: unset;
			max-height: unset;
			min-height: unset;

			textarea {
				background-color: var(--bg) !important;
				border-color: var(--border-color) !important;
				border-radius: var(--border-radius) !important;
				color: white !important;
			}
			& > div > div {
				background-color: transparent !important;
			}
		}
	}
}
#add-participant-icon i {
	border: none;
	color: white;
}
.participants .avatar {
	border:none;
}
.dirent-table-container {
	th {
		color: var(--text-color);
	}
	td {
		color: var(--text-color-secondary);
	}
}
.rich-menu {
	height: unset;
}
.upload-localimg .btn {
	height: 100%;
	width: unset;
	min-width: unset;
	line-height: unset;
}
.header-list-container {
	.list-dropdown {
		background-color: black;
		border: none;
		box-shadow: none;
	}
	.header-list-body-highlight, .header-list-container .header-list-body-hover {
		background-color: var(--bg) !important;
	}
	.header-list .list-dropdown-item:hover {
		background-color: transparent;
		color: var(--primary);
	}
}
.editor {
	background-color: var(--bg);
	box-shadow: 0 0 10px #888;
	border: none;
	color: var(--text-color);

	h1, h2, h3, h4, h5, h6 {
		color: white;
	}
}
.image-tooltip {
	background-color: black;

	&::before {
		border-color: black transparent transparent black;
	}
}
.seafile-ed-image {
	.seafile-ed-image-inResizing {
		box-shadow: 0 0 0 2px var(--primary);
	}
	.image-resizer {
		background-color: var(--primary);
	}
}

.info-item-heading {
	border-color: var(--border-color) !important;;
}

.setting-item-heading {
	border-color: var(--border-color);
}

.detail-container {
	border-color: var(--border-color);
}
.detail-header {
	background-color: black;
	border-color: var(--border-color);

	.detail-title .name {
		color: white
	}
}
.detail-body {
	background-color: var(--bg);
}

.custom-switch-input:checked ~ .custom-switch-indicator {
	background-color: var(--primary);
}
